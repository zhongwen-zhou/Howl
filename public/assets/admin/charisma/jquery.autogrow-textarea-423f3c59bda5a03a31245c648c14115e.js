(function(e){e.fn.autogrow=function(t){return this.filter("textarea").each(function(){var t=this,n=e(t),r=n.height(),i=n.hasClass("autogrow-short")?0:parseInt(n.css("lineHeight")),s=e("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:n.width(),fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),fontWeight:n.css("fontWeight"),lineHeight:n.css("lineHeight"),resize:"none"}).appendTo(document.body),o=function(){var e=function(e,t){for(var n=0,r="";n<t;n++)r+=e;return r},o=t.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(t){return e("&nbsp;",t.length-1)+" "});s.css("width",n.width()),s.html(o),n.css("height",Math.max(s.height()+i,r))};n.change(o).keyup(o).keydown(o),e(window).resize(o),o()})}})(jQuery);